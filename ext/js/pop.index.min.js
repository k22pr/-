function GetAxiosData(t,n){var e=$("li.list-"+t).children("div.icon"),a="";axios.get(dom.url+n.link[1]).then(function(o){if(e.empty(),reg=new RegExp(/\<option (.*)\>(\n|\r)(.+)/,"g"),arr=o.data.match(reg),null==arr)a="findError";else{arr=arr.slice(0,arr.length/2);var c=[arr.length];arr.forEach(function(t,n){c[n]=[,],c[n][0]=t.match(/\t+(.+)\t+/)[1],c[n][0]=c[n][0],c[n][1]=t.match(/\"(.+)\"/)[1]}),banCount=0,c.forEach(function(t,e){-1!=t[0].search(/([\uAC00-\uAD8B]|[\uAD8D-\uD0C3]|[\uD0C5-\uD3B7]|[\uD3B9-\uD653]|[\uD655-\uD7A3]+)/)?(arr.slice(e,1),banCount++):n.link[1]==c[e][1]&&(savedIndex=e)}),console.log(banCount),console.log(arr.length-1),console.log(savedIndex),console.log(" "),a=savedIndex+banCount>=Number(arr.length-1)?"pass":"update",data[t].updateIcon=a,IconType(t,a),t+1==data.length&&setSyncListData()}}).catch(function(n){$("li.list-"+t).children("div.icon").empty()})}function IconType(t,n){switch(n){case"update":setChangeIcon(t,"flash","최신화가 업데이트 되었있습니다.");break;case"pass":setChangeIcon(t,"clock-o","마지막에 본 화로부터 업데이트가 없었습니다.");break;case"shrotTime":setChangeIcon(t,"spinner-time-alt","얼마전에 업데이트를 확인했습니다.");break;case"unknownError":setChangeIcon(t,"exclamation","알 수 없는 이유로 업데이트를 확인할 수 없습니다.");break;case"findError":setChangeIcon(t,"exclamation","현재 위치를 찾을 수 없습니다.");break;default:setChangeIcon(t,"exclamation","정의되지 값이 전달되었습니다.")}}function setChangeIcon(t,n,e){$("li.list-"+t).children("div.icon").html("<i class='fonti um-"+n+" toggling'><div class='hide'>"+e+"</div></i>")}function statusIconUpdate(){$.each(dom.list,function(t,n){void 0==dom.lastUpdate.data||dom.lastUpdate.data[n.link[1]]||IconType(t,dom.lastUpdate.data[n.link[1]])})}function setUpdateTime(){chrome.storage.sync.set({update:dom.lastUpdate},function(){})}function setPrevIcon(){}function setSyncListData(){chrome.storage.sync.set({data:data},function(){})}data={},chrome.storage.sync.get({opt:opt},function(t){void 0==t||""==t||(opt=t.opt)}),dom={url:"http://wasabisyrup.com/archives/",lastUpdate:0,list:function(){return new Promise(function(t,n){$(".my-list").empty(),dom.lastUpdate+300<Math.floor((new Date).getTime()/1e3)?updateFlag=1:updateFlag=0,$.each(data,function(t,n){base=$(".my-list").append("<li class='w12 list-"+t+"'><div class='w10 only-line go hand p3 name-line' link='"+dom.url+n.link[1]+"'><span class='bold'>["+n.link[0].trim()+"]</span> "+n.name+"</div><div class='w1 center b5 small-color icon'><i class='fonti um-spinner-alt spinner-alt um-pulse'></i></div><div class='w1 center tred del hand p3 b5' no='"+t+"'><i class='fonti um-trash'></i></div></li>"),n.updateIcon&&IconType(t,n.updateIcon)}),t()})},updateCheck:function(){$.each(data,function(t,n){type=GetAxiosData(t,n)})}},$(document).ready(function(){function t(){search_link="http://marumaru.in/?r=home&mod=search&keyword="+encodeURI($("input.search").val()),chrome.tabs.create({url:search_link})}1==opt.off&&($(".title-name").addClass("text-grey"),$("img.logo").addClass("grey")),$("input.search").focus(),chrome.storage.sync.get("update",function(t){dom.lastUpdate=t.update,chrome.storage.sync.get("data",function(t){void 0==t||0==t.length?data=[]:(data=t.data,dom.list().then(function(){new Promise(function(t,n){$.each(data,function(t,n){type=GetAxiosData(t,n)}),t()}).then(function(){}).then(function(){dom.lastUpdate=Math.floor((new Date).getTime()/1e3),setUpdateTime()})}))})}),$(document).on("click","div.go",function(){chrome.tabs.create({url:$(this).attr("link")})}),$(document).on("click","div.del",function(){no=$(this).attr("no"),data.splice(no,1),dom.list(),save={json:JSON.stringify(data.reverse())},chrome.storage.sync.set({data:data.reverse()},function(){})}),$(document).on("click","button.search-btn",function(){t()}),$(document).on("keydown","input.search",function(n){13==n.keyCode&&t()})});